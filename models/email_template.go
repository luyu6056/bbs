package models

import (
	"bbs/db"
	"bbs/libraries"
	"bbs/protocol"
)

type Model_email_template struct {
	Model
}

func (this *Model_email_template) GetTemplatefromName(name string) (result *db.Email_template) {
	err := this.Table("Email_template").Where(map[string]interface{}{"Name": name}).Find(&result)
	if err != nil {
		this.Ctx.Adderr(err, map[string]interface{}{"name": name})
	}
	return
}
func SetTemplateFromStr(template string, replace map[string]string) []byte {
	buf := <-libraries.MsgBuf_chan
	defer func() {

		libraries.MsgBuf_chan <- buf
	}()
	buf.Reset()
	be := -1
	en := -1
	index := 0
	for k, b := range template {
		if b == '{' {
			be = k
		}
		if b == '}' {
			en = k
			if be > -1 && en > be {
				if str, ok := replace[template[be+1:en]]; ok {
					buf.WriteString(template[index:be])
					buf.WriteString(str)
				} else {
					buf.WriteString(template[index : en+1])
				}

				index = en + 1
			}
		}
	}
	buf.WriteString(template[en+1:])
	result := make([]byte, buf.Len())
	copy(result, buf.Bytes())
	return result
}
func (m *Model_email_template) CheckEmail(email string) int16 {
	//验证输入的合法性
	if !libraries.Preg_match(`^([A-Za-z0-9_\-\.\u4e00-\u9fa5])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$`, email) {
		return protocol.Err_register_Email
	}
	//验证是否指定后缀邮箱
	//验证是否已经使用
	condition := make(map[string]interface{})
	condition["Email|EmailNew"] = email
	result, err := m.Table("Common_member").Field("Uid").Where(condition).Master(true).Count()
	if err != nil {
		m.Ctx.Adderr(err, nil)
	}
	if result > 0 {
		return protocol.Err_AlreadyUsedEmail
	}
	return protocol.Success
}
func (m *Model_email_template) SendOneEmail(email string, title, body string) int16 {
	err := libraries.SendToMail("system@mail.jachun.com", "JIEjun123456", "smtpdm.aliyun.com:25", title, body, "html", "***@xxx.com", []string{email}, nil, nil)
	if err != nil {
		libraries.DEBUG(err)
		return protocol.Err_EmailSendFail
	}
	return protocol.Success
}
func email_init() {
	model := new(Model)
	var data []*db.Email_template
	model.Table("Email_template").Select(&data)
	if len(data) == 0 {
		data = make([]*db.Email_template, 3)
		data[0] = &db.Email_template{Id: 1, Name: "register", Title: "{Sitename} 用户注册", Message: `<div><table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;background-repeat:repeat;background-position:center top;"><tbody><tr class="gmail-fix" height="0" style="border-collapse:collapse;"><td style="padding:0;Margin:0;"><table width="600" cellspacing="0" cellpadding="0" border="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td cellpadding="0" cellspacing="0" border="0" style="padding:0;Margin:0;line-height:1px;min-width:600px;" height="0"></td></tr></tbody></table></td></tr><tr style="border-collapse:collapse;"><td valign="top" style="padding:0;Margin:0;"><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;"><table class="es-content-body" width="600" cellspacing="0" cellpadding="0" align="center" bgcolor="#ffffff" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#FFFFFF;"><tbody><tr style="border-collapse:collapse;"><td align="left" bgcolor="#ffebd2" style="padding:0;Margin:0;padding-left:5px;padding-right:10px;background-color:#FFEBD2;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="585" valign="top" align="center" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td align="left" style="Margin:0;padding-top:10px;padding-bottom:15px;padding-left:15px;padding-right:20px;"><img src="https://bbs.jachun.com/logo.png" alt="" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;width:86px;height:48px;" width="86"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td style="padding:0;Margin:0;background-color:transparent;" bgcolor="transparent" align="center"><table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;" width="600" cellspacing="0" cellpadding="0" align="center"><tbody><tr style="border-collapse:collapse;"><td align="left" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600" valign="top" align="center" style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#FFFFFF;" width="100%" cellspacing="0" cellpadding="0" bgcolor="#ffffff"><tbody><tr style="border-collapse:collapse;"><td align="center" style="Margin:0;padding-bottom:5px;padding-top:30px;padding-left:30px;padding-right:30px;"><h1 style="Margin:0;line-height:34px;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:28px;font-style:normal;font-weight:bold;color:#111111;"><trans>欢迎注册！</trans></h1></td></tr><tr style="border-collapse:collapse;"><td bgcolor="#ffffff" align="center" style="Margin:0;padding-top:5px;padding-bottom:5px;padding-left:20px;padding-right:20px;"><table width="100%" cellspacing="0" cellpadding="0" border="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td style="padding:0;Margin:0px;border-bottom:1px solid #FFFFFF;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;height:1px;width:100%;margin:0px;"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;"><table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;" width="600" cellspacing="0" cellpadding="0" align="center"><tbody><tr style="border-collapse:collapse;"><td align="left" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600" valign="top" align="center" style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:separate;border-spacing:0px;border-radius:4px;background-color:#FFFFFF;" width="100%" cellspacing="0" cellpadding="0" bgcolor="#ffffff"><tbody><tr style="border-collapse:collapse;"><td class="es-m-txt-l" bgcolor="#ffffff" align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:30px;padding-right:30px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>尊敬的 {Username} :</trans></p><br><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>&nbsp;&nbsp;&nbsp;&nbsp;我们很高兴您能加入{Sitename}，成为我们的会员.</trans></p><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>&nbsp;&nbsp;&nbsp;&nbsp;我们要对您的安全邮箱地址有效性进行验证可用，您需要点击下面按钮激活您的账号.</trans></p></td></tr><tr style="border-collapse:collapse;"><td align="center" style="Margin:0;padding-left:10px;padding-right:10px;padding-top:35px;padding-bottom:35px;"><span class="es-button-border" style="border-style:solid;border-color:#FFA73B;background:1px;border-width:1px;display:inline-block;border-radius:2px;width:auto;"><a href="{verify_link}" class="es-button" target="_blank" style="mso-style-priority:100 !important;text-decoration:none;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:helvetica, 'helvetica neue', arial, verdana, sans-serif;font-size:20px;color:#FFFFFF;border-style:solid;border-color:#FFA73B;border-width:15px 30px;display:inline-block;background:#FFA73B;border-radius:2px;font-weight:normal;font-style:normal;line-height:24px;width:auto;text-align:center;"><trans>点此激活</trans></a></span></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l" align="left" style="Margin:0;padding-top:10px;padding-bottom:15px;padding-left:30px;padding-right:35px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>如果上面按钮无法直接点击打开，请手动复制下面的地址到浏览器访问：</trans></p></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l" align="left" style="Margin:0;padding-top:10px;padding-bottom:10px;padding-left:30px;padding-right:30px;"><a target="_blank" href="{verify_link}" style="-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:16px;text-decoration:underline;color:#FFA73B;"><trans>{verify_link}</trans></a></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l" align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:30px;padding-right:30px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>如果您有任何问题，请回复到{Adminemail}.</trans></p></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l" align="left" bgcolor="transparent" style="Margin:0;padding-bottom:15px;padding-left:30px;padding-right:30px;padding-top:40px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans></trans></p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;"><table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;" width="600" cellspacing="0" cellpadding="0" align="center" bgcolor="rgba(0, 0, 0, 0)"><tbody><tr style="border-collapse:collapse;"><td align="left" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600" valign="top" align="center" style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:separate;border-spacing:0px;background-color:#FFECD1;border-radius:4px;" width="100%" cellspacing="0" cellpadding="0" bgcolor="#ffecd1"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;padding-left:30px;padding-right:30px;padding-top:35px;"><h3 style="Margin:0;line-height:14px;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:12px;font-style:normal;font-weight:normal;color:#111111;"><trans>如果您有任何疑问请访问{Sitename}支持站点.</trans></h3></td></tr><tr style="border-collapse:collapse;"><td esdev-links-color="#ffa73b" align="center" style="padding:0;Margin:0;padding-bottom:30px;padding-left:30px;padding-right:30px;"><a target="_blank" href="{Siteurl}" style="-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:16px;text-decoration:underline;color:#FFA73B;"><trans>{Siteurl}</trans></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>`}
		data[1] = &db.Email_template{Id: 2, Name: "emailverify", Title: "{Sitename} 邮箱验证", Message: `<div class="es-wrapper-color"style="background-color:#F4F4F4;"><!--[if gte mso 9]><v:background xmlns:v="urn:schemas-microsoft-com:vml"fill="t"><v:fill type="tile"color="#f4f4f4"></v:fill></v:background><![endif]--><table class="es-wrapper"width="100%"cellspacing="0"cellpadding="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;"><tbody><tr class="gmail-fix"height="0"style="border-collapse:collapse;"><td style="padding:0;Margin:0;"><table width="600"cellspacing="0"cellpadding="0"border="0"align="center"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td cellpadding="0"cellspacing="0"border="0"style="padding:0;Margin:0;line-height:1px;min-width:600px;"height="0"><img src=""style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;max-height:0px;min-height:0px;min-width:600px;width:600px;"alt=""width="600"height="1"></td></tr></tbody></table></td></tr><tr style="border-collapse:collapse;"><td valign="top"style="padding:0;Margin:0;"><table class="es-content"cellspacing="0"cellpadding="0"align="center"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center"style="padding:0;Margin:0;"><table class="es-content-body"width="600"cellspacing="0"cellpadding="0"align="center"bgcolor="#ffffff"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#FFFFFF;"><tbody><tr style="border-collapse:collapse;"><td align="left"bgcolor="#ffebd2"style="padding:0;Margin:0;padding-left:5px;padding-right:10px;background-color:#FFEBD2;"><table width="100%"cellspacing="0"cellpadding="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="585"valign="top"align="center"style="padding:0;Margin:0;"><table width="100%"cellspacing="0"cellpadding="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td align="left"style="Margin:0;padding-top:10px;padding-bottom:15px;padding-left:15px;padding-right:20px;"><img src="https://bbs.jachun.com/logo.png"alt=""style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;width:86px;height:48px;"width="86"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content"cellspacing="0"cellpadding="0"align="center"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td style="padding:0;Margin:0;background-color:transparent;"bgcolor="transparent"align="center"><table class="es-content-body"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;"width="600"cellspacing="0"cellpadding="0"align="center"><tbody><tr style="border-collapse:collapse;"><td align="left"style="padding:0;Margin:0;"><table width="100%"cellspacing="0"cellpadding="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600"valign="top"align="center"style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#FFFFFF;"width="100%"cellspacing="0"cellpadding="0"bgcolor="#ffffff"><tbody><tr style="border-collapse:collapse;"><td align="center"style="Margin:0;padding-bottom:5px;padding-top:30px;padding-left:30px;padding-right:30px;"><h1 style="Margin:0;line-height:34px;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:28px;font-style:normal;font-weight:bold;color:#111111;">邮箱验证</h1></td></tr><tr style="border-collapse:collapse;"><td bgcolor="#ffffff"align="center"style="Margin:0;padding-top:5px;padding-bottom:5px;padding-left:20px;padding-right:20px;"><table width="100%"height="100%"cellspacing="0"cellpadding="0"border="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td style="padding:0;Margin:0px;border-bottom:1px solid #FFFFFF;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;height:1px;width:100%;margin:0px;"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content"cellspacing="0"cellpadding="0"align="center"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center"style="padding:0;Margin:0;"><table class="es-content-body"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;"width="600"cellspacing="0"cellpadding="0"align="center"><tbody><tr style="border-collapse:collapse;"><td align="left"style="padding:0;Margin:0;"><table width="100%"cellspacing="0"cellpadding="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600"valign="top"align="center"style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:separate;border-spacing:0px;border-radius:4px;background-color:#FFFFFF;"width="100%"cellspacing="0"cellpadding="0"bgcolor="#ffffff"><tbody><tr style="border-collapse:collapse;"><td class="es-m-txt-l"bgcolor="#ffffff"align="left"style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:30px;padding-right:30px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;">您好！感谢您使用 {Sitename} 的论坛服务</p><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>您的账号 {Username} 正在进行邮箱验证，您需要点击下面按钮验证您的账号.</trans></p></td></tr><tr style="border-collapse:collapse;"><td align="center"style="Margin:0;padding-left:10px;padding-right:10px;padding-top:35px;padding-bottom:35px;"><span class="es-button-border"style="border-style:solid;border-color:#FFA73B;background:1px;border-width:1px;display:inline-block;border-radius:2px;width:auto;"><a href="{verify_link}"class="es-button"target="_blank"style="mso-style-priority:100 !important;text-decoration:none;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:helvetica, 'helvetica neue', arial, verdana, sans-serif;font-size:20px;color:#FFFFFF;border-style:solid;border-color:#FFA73B;border-width:15px 30px;display:inline-block;background:#FFA73B;border-radius:2px;font-weight:normal;font-style:normal;line-height:24px;width:auto;text-align:center;">点此验证</a></span></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l"align="left"style="Margin:0;padding-top:10px;padding-bottom:15px;padding-left:30px;padding-right:35px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>如果上面按钮无法直接点击打开，请手动复制下面的地址到浏览器访问：</trans></p></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l"align="left"style="Margin:0;padding-top:10px;padding-bottom:10px;padding-left:30px;padding-right:30px;"><a target="_blank"href="{verify_link}"style="-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:16px;text-decoration:underline;color:#FFA73B;"><trans>{verify_link}</trans></a></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l"align="left"style="padding:0;Margin:0;padding-top:20px;padding-left:30px;padding-right:30px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>如果您有任何问题，请回复到{Adminemail}.</trans></p></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l"align="left"bgcolor="transparent"style="Margin:0;padding-bottom:15px;padding-left:30px;padding-right:30px;padding-top:40px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans></trans></p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content"cellspacing="0"cellpadding="0"align="center"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center"style="padding:0;Margin:0;"><table class="es-content-body"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;"width="600"cellspacing="0"cellpadding="0"align="center"bgcolor="rgba(0, 0, 0, 0)"><tbody><tr style="border-collapse:collapse;"><td align="left"style="padding:0;Margin:0;"><table width="100%"cellspacing="0"cellpadding="0"style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600"valign="top"align="center"style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:separate;border-spacing:0px;background-color:#FFECD1;border-radius:4px;"width="100%"cellspacing="0"cellpadding="0"bgcolor="#ffecd1"><tbody><tr style="border-collapse:collapse;"><td align="center"style="padding:0;Margin:0;padding-left:30px;padding-right:30px;padding-top:35px;"><h3 style="Margin:0;line-height:14px;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:12px;font-style:normal;font-weight:normal;color:#111111;"><trans>如果您有任何疑问请访问杰骏玩家俱乐部支持站点.</trans></h3></td></tr><tr style="border-collapse:collapse;"><td esdev-links-color="#ffa73b"align="center"style="padding:0;Margin:0;padding-bottom:30px;padding-left:30px;padding-right:30px;"><a target="_blank"href="{Siteurl}"style="-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:16px;text-decoration:underline;color:#FFA73B;"><trans>{Siteurl}</trans></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>`}
		data[2] = &db.Email_template{Id: 3, Name: "resetpassword", Title: "{Sitename} 重置密码", Message: `<div class="es-wrapper-color" style="background-color:#F4F4F4;"><!--[if gte mso 9]><v:background xmlns:v="urn:schemas-microsoft-com:vml"fill="t"><v:fill type="tile"color="#f4f4f4"></v:fill></v:background><![endif]--><table class="es-wrapper" width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;padding:0;Margin:0;width:100%;height:100%;background-repeat:repeat;background-position:center top;"><tbody><tr class="gmail-fix" height="0" style="border-collapse:collapse;"><td style="padding:0;Margin:0;"><table width="600" cellspacing="0" cellpadding="0" border="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td cellpadding="0" cellspacing="0" border="0" style="padding:0;Margin:0;line-height:1px;min-width:600px;" height="0"><img src="https://esputnik.com/repository/applications/images/blank.gif" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;max-height:0px;min-height:0px;min-width:600px;width:600px;" alt="" width="600" height="1"></td></tr></tbody></table></td></tr><tr style="border-collapse:collapse;"><td valign="top" style="padding:0;Margin:0;"><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;"><table class="es-content-body" width="600" cellspacing="0" cellpadding="0" align="center" bgcolor="#ffffff" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#FFFFFF;"><tbody><tr style="border-collapse:collapse;"><td align="left" bgcolor="#ffebd2" style="padding:0;Margin:0;padding-left:5px;padding-right:10px;background-color:#FFEBD2;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="585" valign="top" align="center" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td align="left" style="Margin:0;padding-top:10px;padding-bottom:15px;padding-left:15px;padding-right:20px;"><img src="https://enqeti.stripocdn.email/content/guids/CABINET_baef63e47ea8a626db267f009c49a59a/images/35991576136580461.png" alt="" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;width:86px;height:48px;" width="86"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td style="padding:0;Margin:0;background-color:transparent;" bgcolor="transparent" align="center"><table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;" width="600" cellspacing="0" cellpadding="0" align="center"><tbody><tr style="border-collapse:collapse;"><td align="left" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600" valign="top" align="center" style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:#FFFFFF;" width="100%" cellspacing="0" cellpadding="0" bgcolor="#ffffff"><tbody><tr style="border-collapse:collapse;"><td align="center" style="Margin:0;padding-bottom:5px;padding-top:30px;padding-left:30px;padding-right:30px;"><h1 style="Margin:0;line-height:34px;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:28px;font-style:normal;font-weight:bold;color:#111111;">修改密码</h1></td></tr><tr style="border-collapse:collapse;"><td bgcolor="#ffffff" align="center" style="Margin:0;padding-top:5px;padding-bottom:5px;padding-left:20px;padding-right:20px;"><table width="100%" height="100%" cellspacing="0" cellpadding="0" border="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td style="padding:0;Margin:0px;border-bottom:1px solid #FFFFFF;background:rgba(0, 0, 0, 0) none repeat scroll 0% 0%;height:1px;width:100%;margin:0px;"></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;"><table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;" width="600" cellspacing="0" cellpadding="0" align="center"><tbody><tr style="border-collapse:collapse;"><td align="left" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600" valign="top" align="center" style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:separate;border-spacing:0px;border-radius:4px;background-color:#FFFFFF;" width="100%" cellspacing="0" cellpadding="0" bgcolor="#ffffff"><tbody><tr style="border-collapse:collapse;"><td class="es-m-txt-l" bgcolor="#ffffff" align="left" style="Margin:0;padding-top:20px;padding-bottom:20px;padding-left:30px;padding-right:30px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>&nbsp;&nbsp;&nbsp;&nbsp;您收到这封邮件，是由于这个邮箱地址在&nbsp;{Sitename}&nbsp;登记为用户&nbsp;{Username}&nbsp;的邮箱，且该用户请求使用Email密码重置功能所致。</trans></p><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;">如果您没有提交密码重置的操作或不是注册用户，请忽略这封邮件。</p><br><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>您本次操作的验证码为</trans></p></td></tr><tr style="border-collapse:collapse;"><td align="center" style="Margin:0;padding-left:10px;padding-right:10px;padding-top:35px;padding-bottom:35px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size: 32px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color: #000;font-weight: 700;"><trans>{code}</trans></p></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l" align="left" style="padding:0;Margin:0;padding-top:20px;padding-left:30px;padding-right:30px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans>如果您有任何问题，请回复到{Adminemail}.</trans></p></td></tr><tr style="border-collapse:collapse;"><td class="es-m-txt-l" align="left" bgcolor="transparent" style="Margin:0;padding-bottom:15px;padding-left:30px;padding-right:30px;padding-top:40px;"><p style="Margin:0;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-size:16px;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;line-height:24px;color:#666666;"><trans></trans></p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><table class="es-content" cellspacing="0" cellpadding="0" align="center" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;table-layout:fixed !important;width:100%;"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;"><table class="es-content-body" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:transparent;" width="600" cellspacing="0" cellpadding="0" align="center" bgcolor="rgba(0, 0, 0, 0)"><tbody><tr style="border-collapse:collapse;"><td align="left" style="padding:0;Margin:0;"><table width="100%" cellspacing="0" cellpadding="0" style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;"><tbody><tr style="border-collapse:collapse;"><td width="600" valign="top" align="center" style="padding:0;Margin:0;"><table style="mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:separate;border-spacing:0px;background-color:#FFECD1;border-radius:4px;" width="100%" cellspacing="0" cellpadding="0" bgcolor="#ffecd1"><tbody><tr style="border-collapse:collapse;"><td align="center" style="padding:0;Margin:0;padding-left:30px;padding-right:30px;padding-top:35px;"><h3 style="Margin:0;line-height:14px;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:12px;font-style:normal;font-weight:normal;color:#111111;"><trans>如果您有任何疑问请访问{Sitename}支持站点.</trans></h3></td></tr><tr style="border-collapse:collapse;"><td esdev-links-color="#ffa73b" align="center" style="padding:0;Margin:0;padding-bottom:30px;padding-left:30px;padding-right:30px;"><a target="_blank" href="{Siteurl}" style="-webkit-text-size-adjust:none;-ms-text-size-adjust:none;mso-line-height-rule:exactly;font-family:lato, 'helvetica neue', helvetica, arial, sans-serif;font-size:16px;text-decoration:underline;color:#FFA73B;"><trans>{Siteurl}</trans></a></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div>`}
		_, err := model.Table("Email_template").Insert(data)
		if err != nil {
			libraries.DEBUG(err)
		}
	}
}
